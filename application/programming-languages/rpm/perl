#!/bin/env bash
# -*- coding: utf-8 -*-
#
## @Author: sensor-dream
## @Email: sensor-dream@sensor-dream.ru
## @Copyright © sensor-dream. All rights reserved. Contacts: sensor-dream@sensor-dream.ru
## @Copyright © sensor-dream. All rights reserved. Contacts: sensor-dream@sensor-dream.ru
## @Copyright © Sensor-Dream Boxed System (SDBS). Contacts: sensor-dream@sensor-dream.ru
## @License: http://www.apache.org/licenses/LICENSE-2.0
## @Site: https://sensor-dream.ru
## @File: perl
## @Creation date file: 08.10.2020, 06:44:23

[[ -z "${perl_script_source}" ]] && declare -rx perl_script_source="$BASH_SOURCE"

if [[ -z "${perl_script_source_path}" ]]; then
  temp_one="$(dirname ${perl_script_source})"
  if [[ "${temp_one}" == '.' ]]; then
    declare -rx perl_script_source_path="$(pwd)"
  else
    declare -rx perl_script_source_path="${temp_one}"
  fi
fi

if [[ -z "${main_run_script_path}" ]]; then
  declare -rx main_run_script_path="$(pwd)"
  printf "Script runs from path: %s\n" "${main_run_script_path}"
fi

if [[ -z "${main_cfg_script_source}" ]]; then
  check=1
  while [[ "${check}" -eq 1 ]]; do
    if [[ ! -f 'main.cfg' ]]; then
      if [[ "$(pwd)" != "/" ]]; then
        cd ../
      else
        cd ${main_run_script_path}
        check=0
        echo -e '\e[31m'"!!! Not found configuration shared file !!!\033[0m"
        tput sgr0
        exit 1
      fi
    else
      check=0
      declare -rx main_project_path="$(pwd)"
      . "${main_project_path}/main.cfg" "$@"
      cd "${main_run_script_path}"
    fi
  done
fi

printf "Loading: %s\n" "$(readlink -m ${BASH_SOURCE})"

function install_perl() {

  local install_pkg=(
    'perl'
    'perl-Algorithm-C3'
    'perl-Algorithm-Diff'
    'perl-AppConfig'
    'perl-Archive-Any'
    'perl-Archive-Extract'
    'perl-Archive-Extract-Z-Compress-Zlib'
    'perl-Archive-Extract-bz2-IO-Uncompress-Bunzip2'
    'perl-Archive-Extract-gz-Compress-Zlib'
    'perl-Archive-Extract-lzma-IO-Uncompress-UnLzma'
    'perl-Archive-Extract-tar-Archive-Tar'
    'perl-Archive-Extract-tbz-Archive-Tar-IO-Uncompress-Bunzip2'
    'perl-Archive-Extract-tgz-Archive-Tar-Compress-Zlib'
    'perl-Archive-Extract-txz-Archive-Tar-IO-Uncompress-UnXz'
    'perl-Archive-Extract-xz-IO-Uncompress-UnXz'
    'perl-Archive-Extract-zip-Archive-Zip'
    'perl-Archive-Tar'
    'perl-Archive-Zip'
    'perl-Attribute-Handlers'
    'perl-Authen-SASL'
    'perl-B-Hooks-EndOfScope'
    'perl-B-Lint'
    'perl-BSD-Resource'
    'perl-BackPAN-Index'
    'perl-Bit-Vector'
    'perl-CGI'
    'perl-CGI-Fast'
    'perl-CLASS'
    'perl-CPAN'
    'perl-CPAN-DistnameInfo'
    'perl-CPAN-Meta'
    'perl-CPAN-Meta-Requirements'
    'perl-CPAN-Meta-YAML'
    'perl-CPAN-ParseDistribution'
    'perl-CPANPLUS'
    'perl-Cairo'
    'perl-Carp'
    'perl-Carp-Clan'
    'perl-Class-Accessor'
    'perl-Class-Accessor-Chained'
    'perl-Class-Accessor-Grouped'
    'perl-Class-C3'
    'perl-Class-C3-Componentised'
    'perl-Class-Data-Inheritable'
    'perl-Class-ISA'
    'perl-Class-Inspector'
    'perl-Class-Load'
    'perl-Class-Load-XS'
    'perl-Class-Method-Modifiers'
    'perl-Class-Singleton'
    'perl-Class-Tiny'
    'perl-Class-Trigger'
    'perl-Class-XSAccessor'
    'perl-Clone'
    'perl-Clone-Choose'
    'perl-Compress-Bzip2'
    'perl-Compress-Raw-Bzip2'
    'perl-Compress-Raw-Lzma'
    'perl-Compress-Raw-Zlib'
    'perl-Config-Any'
    'perl-Config-General'
    'perl-Config-Grammar'
    'perl-Config-Perl-V'
    'perl-Config-Tiny'
    'perl-Context-Preserve'
    'perl-Convert-ASN1'
    'perl-Cpanel-JSON-XS'
    'perl-Crypt-Cracklib'
    'perl-Crypt-RC4'
    'perl-DBD-MySQL'
    'perl-DBD-SQLite'
    'perl-DBI'
    'perl-DBIx-Class'
    'perl-DBIx-ContextualFetch'
    'perl-DBIx-Simple'
    'perl-DBIx-XHTML_Table'
    'perl-DB_File'
    'perl-Data-Dump'
    'perl-Data-Dumper'
    'perl-Data-Dumper-Concise'
    'perl-Data-OptList'
    'perl-Data-Page'
    'perl-Data-Section'
    'perl-Date-Calc'
    'perl-Date-ISO8601'
    'perl-Date-Manip'
    'perl-DateTime'
    'perl-DateTime-Format-Strptime'
    'perl-DateTime-Locale'
    'perl-DateTime-TimeZone'
    'perl-DateTime-TimeZone-SystemV'
    'perl-DateTime-TimeZone-Tzfile'
    'perl-Devel-ArgNames'
    'perl-Devel-CallChecker'
    'perl-Devel-Caller'
    'perl-Devel-CheckOS'
    'perl-Devel-GlobalDestruction'
    'perl-Devel-LexAlias'
    'perl-Devel-OverloadInfo'
    'perl-Devel-PPPort'
    'perl-Devel-PartialDump'
    'perl-Devel-Peek'
    'perl-Devel-SelfStubber'
    'perl-Devel-Size'
    'perl-Devel-StackTrace'
    'perl-Digest'
    'perl-Digest-HMAC'
    'perl-Digest-MD4'
    'perl-Digest-MD5'
    'perl-Digest-Perl-MD5'
    'perl-Digest-SHA'
    'perl-Digest-SHA3'
    'perl-Dist-CheckConflicts'
    'perl-DynaLoader-Functions'
    'perl-Encode'
    'perl-Encode-Locale'
    'perl-Encode-devel'
    'perl-Env'
    'perl-Errno'
    'perl-Error'
    'perl-Eval-Closure'
    'perl-Exception-Class'
    'perl-Exporter'
    'perl-Exporter-Tiny'
    'perl-ExtUtils-CBuilder'
    'perl-ExtUtils-Command'
    'perl-ExtUtils-Embed'
    'perl-ExtUtils-Install'
    'perl-ExtUtils-MM-Utils'
    'perl-ExtUtils-MakeMaker'
    'perl-ExtUtils-Manifest'
    'perl-ExtUtils-Miniperl'
    'perl-ExtUtils-ParseXS'
    'perl-FCGI'
    'perl-File-CheckTree'
    'perl-File-Copy-Recursive'
    'perl-File-Fetch'
    'perl-File-Find-Rule'
    'perl-File-HomeDir'
    'perl-File-Listing'
    'perl-File-MMagic'
    'perl-File-Path'
    'perl-File-ShareDir'
    'perl-File-Temp'
    'perl-File-Which'
    'perl-File-chdir'
    'perl-File-chmod'
    'perl-Filter'
    'perl-Filter-Simple'
    'perl-GSSAPI'
    'perl-Getopt-Long'
    'perl-Getopt-Long-Descriptive'
    'perl-Git'
    'perl-Git-CPAN-Patch'
    'perl-Git-Repository'
    'perl-Git-SVN'
    'perl-Git-Version-Compare'
    'perl-Glib'
    'perl-Gnome2'
    'perl-Gnome2-Canvas'
    'perl-Gnome2-VFS'
    'perl-Gnome2-Wnck'
    'perl-Goo-Canvas'
    'perl-Graph'
    'perl-GraphViz'
    'perl-Gtk2'
    'perl-Gtk2-AppIndicator'
    'perl-Gtk2-ImageView'
    'perl-Gtk2-Unique'
    'perl-HTML-Form'
    'perl-HTML-Parser'
    'perl-HTML-Tagset'
    'perl-HTML-Tree'
    'perl-HTTP-Cookies'
    'perl-HTTP-Date'
    'perl-HTTP-Message'
    'perl-HTTP-Negotiate'
    'perl-HTTP-Tiny'
    'perl-Hash-Merge'
    'perl-IO'
    'perl-IO-Compress'
    'perl-IO-Compress-Lzma'
    'perl-IO-HTML'
    'perl-IO-Interactive'
    'perl-IO-Socket-IP'
    'perl-IO-Socket-SSL'
    'perl-IO-Socket-Timeout'
    'perl-IO-Tty'
    'perl-IO-Zlib'
    'perl-IO-stringy'
    'perl-IPC-Cmd'
    'perl-IPC-Run'
    'perl-IPC-SysV'
    'perl-IPC-System-Simple'
    'perl-Image-Base'
    'perl-Image-ExifTool'
    'perl-Image-Info'
    'perl-Image-Xbm'
    'perl-Image-Xpm'
    'perl-Import-Into'
    'perl-Importer'
    'perl-JSON'
    'perl-JSON-Any'
    'perl-JSON-MaybeXS'
    'perl-JSON-PP'
    'perl-JSON-XS'
    'perl-Jcode'
    'perl-LDAP'
    'perl-LWP-MediaTypes'
    'perl-LWP-Protocol-https'
    'perl-Linux-Pid'
    'perl-List-MoreUtils'
    'perl-List-MoreUtils-XS'
    'perl-List-Pairwise'
    'perl-Locale-Codes'
    'perl-Locale-Maketext'
    'perl-Locale-Maketext-Simple'
    'perl-Locale-gettext'
    'perl-Log-Message'
    'perl-Log-Message-Simple'
    'perl-MIME-Base64'
    'perl-MIME-Charset'
    'perl-MIME-Types'
    'perl-MRO-Compat'
    'perl-Mail-Sendmail'
    'perl-MailTools'
    'perl-Math-Base36'
    'perl-Math-BigInt'
    'perl-Math-BigInt-FastCalc'
    'perl-Math-BigRat'
    'perl-Math-Complex'
    'perl-Memoize'
    'perl-MetaCPAN-API'
    'perl-MetaCPAN-Client'
    'perl-Mixin-Linewise'
    'perl-Module-Build'
    'perl-Module-CoreList'
    'perl-Module-CoreList-tools'
    'perl-Module-Find'
    'perl-Module-Implementation'
    'perl-Module-Load'
    'perl-Module-Load-Conditional'
    'perl-Module-Loaded'
    'perl-Module-Metadata'
    'perl-Module-Pluggable'
    'perl-Module-Runtime'
    'perl-Module-Runtime-Conflicts'
    'perl-Moo'
    'perl-Moose'
    'perl-MooseX-App'
    'perl-MooseX-SemiAffordanceAccessor'
    'perl-MooseX-Types'
    'perl-MooseX-Types-JSON'
    'perl-MooseX-Types-LoadableClass'
    'perl-MooseX-Types-Path-Class'
    'perl-Mouse'
    'perl-Mozilla-CA'
    'perl-NKF'
    'perl-NTLM'
    'perl-Net-DBus'
    'perl-Net-DNS'
    'perl-Net-HTTP'
    'perl-Net-OAuth'
    'perl-Net-Ping'
    'perl-Net-SMTP-SSL'
    'perl-Net-SSLeay'
    'perl-Net-Telnet'
    'perl-Number-Compare'
    'perl-OLE-Storage_Lite'
    'perl-Object-Accessor'
    'perl-Object-HashBase'
    'perl-Package-Constants'
    'perl-Package-DeprecationManager'
    'perl-Package-Generator'
    'perl-Package-Stash'
    'perl-Package-Stash-XS'
    'perl-Package-Variant'
    'perl-PadWalker'
    'perl-Pango'
    'perl-Parallel-ForkManager'
    'perl-Params-Check'
    'perl-Params-Classify'
    'perl-Params-Util'
    'perl-Params-Validate'
    'perl-Params-ValidationCompiler'
    'perl-Parse-RecDescent'
    'perl-Path-Class'
    'perl-Path-Tiny'
    'perl-PathTools'
    'perl-Perl-OSType'
    'perl-PerlIO-utf8_strict'
    'perl-PerlIO-via-QuotedPrint'
    'perl-PerlIO-via-Timeout'
    'perl-Pod-Checker'
    'perl-Pod-Elemental'
    'perl-Pod-Escapes'
    'perl-Pod-Eventual'
    'perl-Pod-Html'
    'perl-Pod-LaTeX'
    'perl-Pod-POM'
    'perl-Pod-Parser'
    'perl-Pod-Perldoc'
    'perl-Pod-Plainer'
    'perl-Pod-Simple'
    'perl-Pod-Usage'
    'perl-Proc-ProcessTable'
    'perl-Proc-Simple'
    'perl-Readonly'
    'perl-Redis'
    'perl-Ref-Util'
    'perl-Ref-Util-XS'
    'perl-Role-Tiny'
    'perl-SNMP_Session'
    'perl-SQL-Abstract'
    'perl-SQL-Interp'
    'perl-SQL-Translator'
    'perl-Safe-Isa'
    'perl-Scalar-List-Utils'
    'perl-Scope-Guard'
    'perl-SelfLoader'
    'perl-Socket'
    'perl-Software-License'
    'perl-Sort-Naturally'
    'perl-Specio'
    'perl-Spreadsheet-ParseExcel'
    'perl-Spreadsheet-WriteExcel'
    'perl-Storable'
    'perl-String-RewritePrefix'
    'perl-String-Truncate'
    'perl-Sub-Exporter'
    'perl-Sub-Exporter-ForMethods'
    'perl-Sub-Exporter-Progressive'
    'perl-Sub-Identify'
    'perl-Sub-Install'
    'perl-Sub-Name'
    'perl-Sub-Quote'
    'perl-Switch'
    'perl-Sys-CPU'
    'perl-Sys-MemInfo'
    'perl-Sys-Syslog'
    'perl-System-Command'
    'perl-TeX-Hyphen'
    'perl-Template-Toolkit'
    'perl-Term-ANSIColor'
    'perl-Term-Cap'
    'perl-Term-Size-Any'
    'perl-Term-Size-Perl'
    'perl-Term-Table'
    'perl-Term-UI'
    'perl-TermReadKey'
    'perl-Test'
    'perl-Test-Deep'
    'perl-Test-Harness'
    'perl-Test-Simple'
    'perl-Text-Aligner'
    'perl-Text-Autoformat'
    'perl-Text-Balanced'
    'perl-Text-CSV_XS'
    'perl-Text-Diff'
    'perl-Text-Glob'
    'perl-Text-ParseWords'
    'perl-Text-RecordParser'
    'perl-Text-Reform'
    'perl-Text-Soundex'
    'perl-Text-Table'
    'perl-Text-Tabs+Wrap'
    'perl-Text-TabularDisplay'
    'perl-Text-Template'
    'perl-Text-Unidecode'
    'perl-Text-WagnerFischer'
    'perl-Thread-Queue'
    'perl-Time-HiRes'
    'perl-Time-Local'
    'perl-Time-Piece'
    'perl-TimeDate'
    'perl-Try-Tiny'
    'perl-Type-Tiny'
    'perl-Types-Serialiser'
    'perl-UNIVERSAL-isa'
    'perl-URI'
    'perl-Unicode-Collate'
    'perl-Unicode-EastAsianWidth'
    'perl-Unicode-LineBreak'
    'perl-Unicode-Map'
    'perl-Unicode-Normalize'
    'perl-Unicode-UTF8'
    'perl-Variable-Magic'
    'perl-WWW-Mechanize'
    'perl-WWW-RobotRules'
    'perl-WebService-Dropbox'
    'perl-X11-Protocol'
    'perl-X11-Protocol-Other'
    'perl-XML-Dumper'
    'perl-XML-LibXML'
    'perl-XML-NamespaceSupport'
    'perl-XML-Parser'
    'perl-XML-SAX'
    'perl-XML-SAX-Base'
    'perl-XML-Simple'
    'perl-XML-Twig'
    'perl-XML-Writer'
    'perl-XML-XPath'
    'perl-XString'
    'perl-YAML'
    'perl-YAML-LibYAML'
    'perl-autodie'
    'perl-bignum'
    'perl-common-sense'
    'perl-constant'
    'perl-devel'
    'perl-encoding'
    'perl-experimental'
    'perl-inc-latest'
    'perl-interpreter'
    'perl-libintl-perl'
    'perl-libnet'
    'perl-libnetcfg'
    'perl-libs'
    'perl-libwww-perl'
    'perl-local-lib'
    'perl-macros'
    'perl-namespace-autoclean'
    'perl-namespace-clean'
    'perl-open'
    'perl-parent'
    'perl-perlfaq'
    'perl-podlators'
    'perl-srpm-macros'
    'perl-strictures'
    'perl-threads'
    'perl-threads-shared'
    'perl-utils'
    'perl-version'
    'perltidy'
  )

  printf '%s\n' $(unset_dupes_in_array "${install_pkg[@]}") | sort -o "${main_project_path}/package-list/perl.txt"
  pm "$@" -- "${install_pkg[@]}"

}

function main_perl_script_source() {

  # prinf "Initialise main function of perl script source\n";

  install_perl "$@"

}

main_perl_script_source "$@"
